\documentclass[12pt,a4paper,UTF8]{ctexart} % Use A4 paper with a 12pt font size - different paper sizes will require manual recalculation of page margins and border positions
\usepackage{listings} % For Code Block
\usepackage{marginnote} % Required for margin notes
\usepackage{wallpaper} % Required to set each page to have a background
\usepackage{lastpage} % Required to print the total number of pages
\usepackage[left=1.3cm,right=4.6cm,top=1.8cm,bottom=4.0cm,marginparwidth=3.4cm]{geometry} % Adjust page margins
\usepackage{amsmath} % Required for equation customization
\usepackage{amssymb} % Required to include mathematical symbols
\usepackage{xcolor} % Required to specify colors by name

\usepackage{fancyhdr} % Required to customize headers
\setlength{\headheight}{80pt} % Increase the size of the header to accommodate meta-information
\pagestyle{fancy}\fancyhf{} % Use the custom header specified below
\renewcommand{\headrulewidth}{0pt} % Remove the default horizontal rule under the header

\setlength{\parindent}{0cm} % Remove paragraph indentation
\newcommand{\tab}{\hspace*{2em}} % Defines a new command for some horizontal space

\newcommand\BackgroundStructure{ % Command to specify the background of each page
	\setlength{\unitlength}{1mm} % Set the unit length to millimeters
	
	\setlength\fboxsep{0mm} % Adjusts the distance between the frameboxes and the borderlines
	\setlength\fboxrule{0.5mm} % Increase the thickness of the border line
	\put(9, 9){\fcolorbox{black}{white}{\framebox(192, 261){}}} % Main content box
%	\put(165, 10){\fcolorbox{black}{white}{\framebox(37,247){}}} % Margin box
	\put(9, 262){\fcolorbox{black}{white}{\framebox(192, 25){}}} % Header box
	
    \put(132, 263){\includegraphics[height=23mm,keepaspectratio]{xh}}

	\put(162,277){\large{Designed With}}
	\put(168,268){\LARGE{\textbf{\LaTeX}}}
}

\lstset{
    basicstyle          =   \sffamily,          % 基本代码风格
    keywordstyle        =   \bfseries,          % 关键字风格
    commentstyle        =   \rmfamily\itshape,  % 注释的风格，斜体
    stringstyle         =   \ttfamily,  % 字符串风格
    flexiblecolumns,                % 别问为什么，加上这个
    numbers             =   left,   % 行号的位置在左边
    showspaces          =   false,  % 是否显示空格，显示了有点乱，所以不显示了
    numberstyle         =   \zihao{-5}\ttfamily,    % 行号的样式，小五号，tt等宽字体
    showstringspaces    =   false,
    captionpos          =   t,      % 这段代码的名字所呈现的位置，t指的是top上面
    frame               =   lrtb,   % 显示边框
    xleftmargin=2.5em,
}

\lstdefinestyle{CPP}{
    language        =   C, % 选择语言
    basicstyle      =   \zihao{-5}\ttfamily,
    numberstyle     =   \zihao{-5}\ttfamily,
    keywordstyle    =   \color{blue},
    keywordstyle    =   [2] \color{teal},
    stringstyle     =   \color{magenta},
    commentstyle    =   \color{red}\ttfamily,
    breaklines      =   true,   % 自动换行，建议不要写太长的行
    columns         =   fixed,  % 如果不加这一句，字间距就不固定，很丑，必须加
    basewidth       =   0.5em,
}

%----------------------------------------------------------------------------------------
%	HEADER INFORMATION
%----------------------------------------------------------------------------------------

\fancyhead[L]{\begin{tabular}{l r | l r |} % The header is a table with 4 columns
		\textbf{作业科目} & 高级程序设计 & \textbf{当前页码} & \thepage/\pageref{LastPage} \\
		\textbf{作业名称} & 第二次作业 & \textbf{作者姓名} & 李宗泽 \\
		\textbf{开始日期} & 2021 年 10 月 23 日 & \textbf{作者班级} & 219 \\
		\textbf{完成日期} & \today & \textbf{作者学号} & 20212232016 \\ 
\end{tabular}}



\begin{document}
	
	\AddToShipoutPicture{\BackgroundStructure}
	样例。
	
	

    \begin{lstlisting}[style=CPP]
	cout << "键入你要输出的数据个数：";
	cin >> num_count;
	cout << endl;
	cout << "请输入 " << num_count << " 个整数（以空格或换行分隔）：";
	for (int i = 1; i <= num_count; i++)
    \end{lstlisting}


\end{document}
